!function(){"use strict";function e(e){e.when("/",{templateUrl:"index.html"}).otherwise({redirectTo:"/"})}angular.module("businessLicenseSearch",["businessLicenseSearch.settings","businessLicenseSearch.templates","ngCsv","ngRoute","ngTable"]).config(["$routeProvider",e])}(),function(){"use strict";function e(e,s){this.load=function(){var r=[s.host,"resource",s.id].join("/"),n="?$limit=50000";return e({cache:!0,method:"GET",url:r+n,headers:{Accept:"application/json"}})}}angular.module("businessLicenseSearch").service("BusinessLicenseApi",["$http","BusinessLicenseSettings",e])}(),function(){"use strict";function e(e,s,r){var n=this;n.$onInit=function(){n.id="",n.dba="",n.address="",n.category="",n.ready=!1,n.error=!1,n.records=[],n.tableParams=new r({count:0,sorting:{dba:"asc"}},{counts:[],getData:function(e){var r=e.sorting()?s("orderBy")(n.results,e.orderBy()):n.results;return r}}),e.load().then(function(e){n.records=e.data,n.categories=n.records.reduce(function(e,s){return e.indexOf(s.business_type)<0&&e.push(s.business_type),e},[]).sort(),n.ready=!0},function(e){n.error=!0})},n.reset=function(){n.id="",n.dba="",n.address="",n.category="",n.results=void 0,n.tableParams.reload()},n.search=function(){var e=[];(n.id||n.dba||n.category||n.address)&&(e=n.records,e=s("filter")(e,{license_number:n.id}),e=s("filter")(e,{dba:n.dba}),e=s("filter")(e,{business_type:n.category}),e=s("byAddress")(e,n.address)),n.results=e,n.tableParams.reload()}}angular.module("businessLicenseSearch").component("businessLicenseSearch",{controller:["BusinessLicenseApi","$filter","NgTableParams",e],templateUrl:"business-license-search.html"})}(),function(){"use strict";function e(){return function(e,s){return s.length<1?e:(s=s.toLowerCase(),(e||[]).filter(function(e){var r=e.address&&e.address.toLowerCase().indexOf(s)>-1;return r=r||e.city&&e.city.toLowerCase().indexOf(s)>-1,r=r||e.address&&e.state.toLowerCase().indexOf(s)>-1,r=r||e.zip_code&&e.zip_code.indexOf(s)>-1}))}}function s(){return function(e,s,r){var n=new RegExp(s,"g");return e.replace(n,r)}}angular.module("businessLicenseSearch").filter("byAddress",e).filter("replace",s)}();