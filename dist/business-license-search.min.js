!function(){"use strict";function e(e){e.when("/",{templateUrl:"index.html",controller:"SearchController",controllerAs:"vm"}).otherwise({redirectTo:"/"})}angular.module("businessLicenseSearch",["businessLicenseSearch.settings","businessLicenseSearch.templates","ngCsv","ngRoute","ngTable"]).config(["$routeProvider",e])}(),function(){"use strict";function e(e,r,t){var n=this;n.id="",n.dba="",n.address="",n.category="",n.ready=!1,n.error=!1,n.records=void 0,n.categories=void 0,n.results=void 0,n.tableParams=void 0,n.reset=function(){n.id="",n.dba="",n.address="",n.category="",n.results=void 0,n.tableParams.reload()},n.search=function(){if(n.id||n.dba||n.address||n.category){var e=n.records;e=r("byId")(e,n.id),e=r("byDba")(e,n.dba),e=r("byAddress")(e,n.address),e=r("byCategory")(e,n.category),n.results=e,n.tableParams.reload()}},e.load().then(function(e){n.records=e.data,n.categories=n.records.reduce(function(e,r){return e.indexOf(r.business_type)<0&&e.push(r.business_type),e},[]).sort(),n.tableParams=new t({count:0,sorting:{dba:"asc"}},{counts:[],total:(n.results||[]).length,getData:function(e,t){var s=t.sorting()?r("orderBy")(n.results,t.orderBy()):n.results;e.resolve(s)}}),n.ready=!0},function(e){n.error=!0})}angular.module("businessLicenseSearch").controller("SearchController",["BusinessLicenseRecords","$filter","NgTableParams",e])}(),function(){"use strict";function e(){return function(e,r){return r.length<1?e:(e||[]).filter(function(e){return e.license_number&&e.license_number.indexOf(r)>-1})}}function r(){return function(e,r){return r.length<1?e:(r=r.toLowerCase(),(e||[]).filter(function(e){return e.dba&&e.dba.toLowerCase().indexOf(r)>-1}))}}function t(){return function(e,r){return r.length<1?e:(r=r.toLowerCase(),(e||[]).filter(function(e){var t=e.address&&e.address.toLowerCase().indexOf(r)>-1;return t=t||e.city&&e.city.toLowerCase().indexOf(r)>-1,t=t||e.address&&e.state.toLowerCase().indexOf(r)>-1,t=t||e.zip_code&&e.zip_code.indexOf(r)>-1}))}}function n(){return function(e,r){return r.length<1?e:(r=r.toLowerCase(),(e||[]).filter(function(e){return e.business_type&&0===e.business_type.toLowerCase().indexOf(r)}))}}function s(){return function(e,r,t){var n=new RegExp(r,"g");return e.replace(n,t)}}angular.module("businessLicenseSearch").filter("byId",e).filter("byDba",r).filter("byAddress",t).filter("byCategory",n).filter("replace",s)}(),function(){"use strict";function e(e,r){this.load=function(){return e({method:"GET",url:[r.host,"resource",r.id].join("/"),headers:{Accept:"application/json"}})}}angular.module("businessLicenseSearch").service("BusinessLicenseRecords",["$http","BusinessLicenseSettings",e])}();