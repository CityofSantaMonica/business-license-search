!function(){"use strict";function e(e){e.when("/",{templateUrl:"index.html"}).otherwise({redirectTo:"/"})}angular.module("businessLicenseSearch",["businessLicenseSearch.settings","businessLicenseSearch.templates","ngCsv","ngRoute","ngTable"]).config(["$routeProvider",e])}(),function(){"use strict";function e(e,s){this.load=function(){var r=[s.host,"resource",s.id].join("/"),t="?$limit=50000";return e({cache:!0,method:"GET",url:r+t,headers:{Accept:"application/json"}})}}angular.module("businessLicenseSearch").service("BusinessLicenseApi",["$http","BusinessLicenseSettings",e])}(),function(){"use strict";function e(e,s,r){var t=this;t.$onInit=function(){t.id="",t.dba="",t.address="",t.category="",t.ready=!1,t.error=!1,t.records=[],t.tableParams=new r({count:0,sorting:{dba:"asc"}},{counts:[],getData:function(e){var r=e.sorting()?s("orderBy")(t.results(),e.orderBy()):t.results();return r}}),e.load().then(function(e){t.records=e.data,t.categories=t.records.reduce(function(e,s){return e.indexOf(s.business_type)<0&&e.push(s.business_type),e},[]).sort(),t.ready=!0},function(e){t.error=!0})},t.results=function(){if(t._results)return t._results.map(function(e){return{license_number:e.license_number,dba:e.dba,address:e.address,city:e.city,state:e.state,zip_code:e.zip_code,business_type:e.business_type}})},t.hasResults=function(){return t.results()&&t.results().length>0},t.reset=function(){t.id="",t.dba="",t.address="",t.category="",t._results=void 0,t.tableParams.reload()},t.search=function(){var e=[];(t.id||t.dba||t.category||t.address)&&(e=t.records,e=s("filter")(e,{license_number:t.id}),e=s("filter")(e,{dba:t.dba}),e=s("filter")(e,{business_type:t.category}),e=s("byAddress")(e,t.address)),t._results=e,t.tableParams.reload()}}angular.module("businessLicenseSearch").component("businessLicenseSearch",{controller:["BusinessLicenseApi","$filter","NgTableParams",e],templateUrl:"business-license-search.html"})}(),function(){"use strict";function e(){return function(e,s){return s.length<1?e:(s=s.toLowerCase(),(e||[]).filter(function(e){var r=e.address&&e.address.toLowerCase().indexOf(s)>-1;return r=r||e.city&&e.city.toLowerCase().indexOf(s)>-1,r=r||e.address&&e.state.toLowerCase().indexOf(s)>-1,r=r||e.zip_code&&e.zip_code.indexOf(s)>-1}))}}function s(){return function(e,s,r){var t=new RegExp(s,"g");return e.replace(t,r)}}angular.module("businessLicenseSearch").filter("byAddress",e).filter("replace",s)}();